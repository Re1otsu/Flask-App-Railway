<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/normalize.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/1module.css') }}">
<title>BilimQuest Map</title>
</head>
<body style="background-image: url('{{ url_for('static', filename='img/bg.jpg') }}');">

  <!-- Верхняя панель -->
  <div class="topbar">
    <div class="title">BilimQuest</div>
    <div class="coins">⭐ {{ student.score }}</div>
  </div>

  <!-- Полотно карты -->
  <div class="map" id="map">

    <!-- Островки/модули (позиции в %) -->
    <a class="node" style="top: 85%; left: 15%;" href="/game1">
      <div class="island"></div>
      <div class="label">Ақпарат беру</div>
    </a>

    <a class="node" style="top: 15%; left: 50%;" href="/bolim1_1">
      <div class="island"><img src="static/img/home.png" class="emoji" style="width:10vw; height:20vh; transform: translate(0, -80px);"></div>
      <div class="label">Біздің айналамыздағы ақпарат</div>
    </a>

    <a class="node" style="top: 80%; left: 58%;" href="/game">
      <div class="island"></div>
      <div class="label">Ақпаратты шифрлау</div>
    </a>

    <a class="node" style="top: 82%; left: 40%;" href="/robot">
      <div class="island"></div>
      <div class="label">Екілік ақпаратты ұсыну</div>
    </a>

    <div class="node locked" style="top: 85%; left: 75%;" title="Алдымен алдыңғы модульдерді аяқтаңыз">
      <div class="island"></div>
      <div class="label">Бірінші бөлім бойынша қорытынды тапсырмалар</div>
    </div>

    <a class="node" style="top: 50%; left: 50%;" href="/student">
      <img src="static/img/earth.png" style="height:auto; width:10vw; box-shadow: 0 0 20px rgba(0,0,0,0.5); border-radius:8em;">
    </a>

  </div>

<script>
  // Пример: запрет клика по заблокированному модулю
  document.querySelectorAll('.node.locked').forEach(n=>{
    n.addEventListener('click', e=>{
      e.preventDefault();
      n.animate([{transform:'translate(-50%,-50%)'}, {transform:'translate(-50%,-50%) rotate(-2deg)'},
                 {transform:'translate(-50%,-50%) rotate(2deg)'},
                 {transform:'translate(-50%,-50%)'}], {duration:300});
    });
  });
</script>
</body>
</html>
