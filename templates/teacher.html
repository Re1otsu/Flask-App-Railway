<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú“±“ì–∞–ª—ñ–º –ø–∞—Ä–∞“ì—ã</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/teacher.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>–ú“±“ì–∞–ª—ñ–º –ø–∞—Ä–∞“ì—ã</h1>
            {% if session.get("email") %}
                <p>“ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑, {{ session.get("email") }}!</p>
            {% else %}
                <p>“ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑! –ú“±–Ω–¥–∞ —Å—ñ–∑ —Ç—ñ—Ä–∫–µ–ª—ñ–ø, –∂“Ø–π–µ–≥–µ –∫—ñ—Ä–µ –∞–ª–∞—Å—ã–∑.</p>
            {% endif %}
        </header>
        <main>
            <div class="buttons">
                {% if session.get("email") %}
                    <form action="/logout" method="POST" style="display: inline;">
                        <button type="submit" class="btn">–®—ã“ì—É</button>
                    </form>
                    <a href="/teacher/progress" class="btn">üìä –ü—Ä–æ–≥—Ä–µ—Å—Å —É—á–µ–Ω–∏–∫–æ–≤</a>

                    <!-- üîò –ë–∞—Ç—ã—Ä–º–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
                    <button class="announcement-btn" onclick="openModal()">+ –ñ–∞“£–∞ —Ö–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É</button>

                    <!-- ü™ü –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
                    <div id="announcementModal" class="modal">
                        <div class="modal-content">
                            <span class="close-btn" onclick="closeModal()">&times;</span>
                            <h2>–ñ–∞“£–∞ —Ö–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É</h2>
                            <form method="POST" action="/create_announcement">
                                <label>–°—ã–Ω—ã–ø—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑:</label><br>
                                <select name="class_name" required>
                                    <option value="">–°—ã–Ω—ã–ø —Ç–∞“£–¥–∞“£—ã–∑</option>
                                    <option value="5–ê">5–ê</option>
                                    <option value="5–ë">5–ë</option>
                                    <option value="5–í">5–í</option>
                                </select><br><br>

                                <label>–•–∞–±–∞—Ä–ª–∞–º–∞ –º”ô—Ç—ñ–Ω—ñ:</label><br>
                                <textarea name="message" rows="4" cols="50" required></textarea><br><br>

                                <button type="submit" class="btn">–ñ–∞—Ä–∏—è–ª–∞—É</button>
                            </form>
                            <h2>–ë–∞—Ä–ª—ã“õ —Ö–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É–ª–∞—Ä</h2>
                            <ul>
                                {% for a in announcements %}
                                <li>
                                    <strong>{{ a.class_name }}</strong>: {{ a.message }}<br>
                                    <form action="/delete_announcement/{{ a.id }}" method="POST" style="display:inline;">
                                        <button type="submit" onclick="return confirm('”®—à—ñ—Ä—É–¥—ñ “õ–∞–ª–∞–π—Å—ã–∑ –±–∞?')">‚ùå ”®—à—ñ—Ä—É</button>
                                    </form>
                                    <a href="/edit_announcement/{{ a.id }}">‚úèÔ∏è ”®–∑–≥–µ—Ä—Ç—É</a>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>

                    <script>
                        function openModal() {
                            document.getElementById('announcementModal').style.display = 'block';
                        }

                        function closeModal() {
                            document.getElementById('announcementModal').style.display = 'none';
                        }

                        window.onclick = function(event) {
                            if (event.target === document.getElementById('announcementModal')) {
                                closeModal();
                            }
                        }
                    </script>
                {% else %}
                    <a href="/register_teacher" class="btn">–¢—ñ—Ä–∫–µ–ª—É</a>
                    <a href="/login_teacher" class="btn">–ö—ñ—Ä—É</a>
                {% endif %}
            </div>
        </main>
    </div>
</body>
</html>
